extends ../../layouts/default.pug
include ../../mixins/alert.pug
include ../../mixins/table-tree.pug
block main
    +alert_success("5000")
    +alert_error("5000")
    .container-fluid.p-0
        //- PAGE HEADER
        .d-flex.justify-content-between.align-items-center.mb-4
            div
                h2.fw-bold.mb-1 Danh mục sản phẩm
                nav(aria-label="breadcrumb")
                    ol.breadcrumb.bg-transparent.p-0.mb-0.fs-6
                        li.breadcrumb-item
                            a.text-decoration-none.text-secondary(href=`${prefixAdmin}/dashboard`) Dashboard
                        li.breadcrumb-item.active(aria-current="page") Danh mục
            
            a.btn.btn-primary.d-flex.align-items-center.gap-2(href=`${prefixAdmin}/products-category/create`)
                i.fas.fa-plus.mr-2
                span Thêm mới

        //- FILTER & ACTION BAR
        .card.border-0.shadow-sm.mb-4
            .card-body.p-3
                .row.g-3
                    //- Search
                    .col-12.col-lg-6
                        form(method="GET" form-search)
                            .input-group
                                button.input-group-text.bg-light.border-end-0.text-secondary
                                    i.fas.fa-search
                                input.form-control.border-start-0.bg-light.ps-0(
                                    type='text', 
                                    placeholder='Tìm kiếm danh mục...' 
                                    name="keyword" 
                                    value=keyword
                                )
                    
                    //- Filter Status
                    .col-12.col-lg-6.d-flex.justify-content-lg-end.align-items-center.gap-3
                        .d-flex.align-items-center
                            label.text-muted.small.fw-medium.text-nowrap.mr-2 Trạng thái:
                            select.form-control.form-control-sm(name="status" style="width: 150px;" class ="select-status")
                                each item in filter
                                    option(value=item.value selected = item.selected) #{item.name}
                                    

        //- CATEGORY TABLE (HIERARCHY VIEW)
        .card.border-0.shadow-sm
            .card-body.p-0
                .table-responsive
                    table.table.table-hover.align-middle.mb-0.category-table(checkbox-multi)
                        thead.bg-light
                            tr
                                
                                th Hình ảnh
                                th Tên danh mục
                                th Danh mục cha

                                th Vị trí
                                th Trạng thái
                                th.text-end.pe-4 Hành động
                        tbody
                            +table-tree(records)

                //- PAGINATION (Nếu cần)
                .card-footer.bg-white.border-top-0.py-3
                    //- ... Pagination code tương tự trang sản phẩm ...
    form(action= ""
    form-change-status 
    path = `${prefixAdmin}/products-category/change-status`
    method = "POST"
    )