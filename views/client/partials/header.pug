include ../mixins/sub-menu.pug
header.header
  .container
    nav.navbar.navbar-expand-lg.navbar-light
      a.navbar-brand.header__brand(href='/') VUKHANHSHOP
      button.navbar-toggler(type='button', data-bs-toggle='collapse', data-bs-target='#navbarNav')
        span.navbar-toggler-icon
      .collapse.navbar-collapse.justify-content-center#navbarNav
        ul.navbar-nav
          li.nav-item
            a.nav-link.header__nav-link.header__nav-link--active(href='/') Trang chủ
          li.nav-item
            a.nav-link.header__nav-link(href='/products') Sản phẩm
            +sub-menu(layoutProductsCategory)
          each item in layoutProductsCategory
            li.nav-item
              a.nav-link.header__nav-link(href=`/products/${item.slug}`) #{item.title}
            
          
      .header__actions.d-flex.align-items-center
        button.header__actions-btn.js-search-trigger(type="button")
          i.fas.fa-search
        button.header__actions-btn
          i.far.fa-heart
        .header__mini-cart-wrapper
          a.header__actions-btn(href="/cart")
            i.fas.fa-shopping-bag
            //- Hiển thị số lượng dynamic
            span.badge.rounded-pill.header__badge #{miniCart ? miniCart.totalQuantity : 0}
          
          //- HỘP MINI CART (Dropdown)
          .mini-cart
            //- TH1: Có sản phẩm
            if miniCart && miniCart.products.length > 0
              .mini-cart__list
                each item in miniCart.products
                  .mini-cart__item
                    //- Ảnh sản phẩm
                    .mini-cart__image
                      a(href=`/products/detail/${item.productInfo.slug}`)
                        img(src=item.productInfo.thumbnail, alt=item.productInfo.title)
                    
                    //- Thông tin
                    .mini-cart__content
                      a.mini-cart__title(href=`/products/detail/${item.productInfo.slug}`) #{item.productInfo.title}
                      div.mini-cart__meta
                        span.mini-cart__quantity Số lượng: #{item.quantity} 
                        //- span.mini-cart__price #{item.productInfo.priceNew.toLocaleString('vi-VN')}đ
                      div.mini-cart__variant.text-muted.small.mb-1
                         | Size: #{item.size} / Màu: #{item.color}
                         
                    //- Nút xóa nhanh
                    a.mini-cart__remove(href=`/cart/delete/${item.product_id}`) 
                      i.fas.fa-times

            else
              .mini-cart__empty
                i.fas.fa-shopping-basket.mb-2
                p Chưa có sản phẩm nào
  .search-overlay#search-overlay
    .search-overlay__inner
        .container
            //- Form tìm kiếm
            form(action="/search" method="GET")
                .search-bar-wrapper
                    i.fas.fa-search.search-icon
                    input.form-control.search-input(
                        type="text" 
                        name="keyword" 
                        placeholder="Tìm kiếm sản phẩm..." 
                        autocomplete="off"
                    )
                    //- Nút đóng (X)
                    button.btn-close-search.js-close-search(type="button")
                        i.fas.fa-times

            //- Phần từ khóa nổi bật
            .search-suggestions.mt-4
                h6.fw-bold.mb-3 Từ khóa nổi bật
                .d-flex.flex-wrap.gap-2
                    a.tag-item(href="/products?keyword=áo phông") Áo phông
                    a.tag-item(href="/products?keyword=hoodie") Hoodie
                    a.tag-item(href="/products?keyword=áo khoác") Áo khoác
                    a.tag-item(href="/products?keyword=6LB22W001") 6LB22W001